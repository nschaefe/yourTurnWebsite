import"../chunks/DsnmJJEf.js";import{i as se}from"../chunks/DhJbufK5.js";import{a as At,l as Me,e as N,o as St,s as It}from"../chunks/BiApfhNE.js";import{v as Pt,w as D,x as Et,h as s,R as at,y as Mt,H as Nt,z as Ye,A as pe,B as ke,K as ae,ab as Rt,af as jt,D as Se,G as Dt,F as $,aB as Je,C as rt,ax as R,aC as Xe,aj as lt,a8 as Lt,aD as ue,I as nt,J as Ht,aE as ce,aF as Ot,aG as ye,aH as it,ad as Wt,aI as Ft,ai as qt,aJ as zt,X as Bt,aa as Vt,aK as ot,N as Ie,aL as Ut,aM as Gt,aN as Kt,aO as Yt,M as Ne,aP as Jt,a6 as Xt,aQ as Qt,e as st,p as fe,l as U,t as oe,a as O,m as ve,V as b,n as x,q as y,aR as Te,o as T,f as Pe,aS as Q,aA as Qe}from"../chunks/BP_LslGO.js";import{p as L,i as Z,b as Zt}from"../chunks/BJ6pa5lZ.js";function ut(e,t){return t}function $t(e,t,a){for(var r=e.items,l=[],i=t.length,n=0;n<i;n++)Ft(t[n].e,l,!0);var d=i>0&&l.length===0&&a!==null;if(d){var _=a.parentNode;qt(_),_.append(a),r.clear(),V(e,t[0].prev,t[i-1].next)}zt(l,()=>{for(var u=0;u<i;u++){var m=t[u];d||(r.delete(m.k),V(e,m.prev,m.next)),it(m.e,!d)}})}function ct(e,t,a,r,l,i=null){var n=e,d={flags:t,items:new Map,first:null},_=(t&ot)!==0;if(_){var u=e;n=D?pe(Vt(u)):u.appendChild(rt())}D&&Et();var m=null,C=!1,w=new Map,S=at(()=>{var A=a();return Lt(A)?A:A==null?[]:lt(A)}),c,f;function g(){ea(f,c,d,w,n,l,t,r,a),i!==null&&(c.length===0?m?nt(m):m=Se(()=>i(n)):m!==null&&Ht(m,()=>{m=null}))}Pt(()=>{f??=Bt,c=s(S);var A=c.length;if(C&&A===0)return;C=A===0;let I=!1;if(D){var M=Mt(n)===Nt;M!==(A===0)&&(n=Ye(),pe(n),ke(!1),I=!0)}if(D){for(var j=null,p,v=0;v<A;v++){if(ae.nodeType===Rt&&ae.data===jt){n=ae,I=!0,ke(!1);break}var h=c[v],P=r(h,v);p=Ee(ae,d,j,null,h,P,v,l,t,a),d.items.set(P,p),j=p}A>0&&pe(Ye())}if(D)A===0&&i&&(m=Se(()=>i(n)));else if(Dt()){var q=new Set,z=$;for(v=0;v<A;v+=1){h=c[v],P=r(h,v);var B=d.items.get(P)??w.get(P);B?(t&(ce|ue))!==0&&ft(B,h,v,t):(p=Ee(null,d,null,null,h,P,v,l,t,a,!0),w.set(P,p)),q.add(P)}for(const[H,Y]of d.items)q.has(H)||z.skipped_effects.add(Y.e);z.add_callback(g)}else g();I&&ke(!0),s(S)}),D&&(n=ae)}function ea(e,t,a,r,l,i,n,d,_){var u=(n&Ut)!==0,m=(n&(ce|ue))!==0,C=t.length,w=a.items,S=a.first,c=S,f,g=null,A,I=[],M=[],j,p,v,h;if(u)for(h=0;h<C;h+=1)j=t[h],p=d(j,h),v=w.get(p),v!==void 0&&(v.a?.measure(),(A??=new Set).add(v));for(h=0;h<C;h+=1){if(j=t[h],p=d(j,h),v=w.get(p),v===void 0){var P=r.get(p);if(P!==void 0){r.delete(p),w.set(p,P);var q=g?g.next:c;V(a,g,P),V(a,P,q),Ce(P,q,l),g=P}else{var z=c?c.e.nodes_start:l;g=Ee(z,a,g,g===null?a.first:g.next,j,p,h,i,n,_)}w.set(p,g),I=[],M=[],c=g.next;continue}if(m&&ft(v,j,h,n),(v.e.f&ye)!==0&&(nt(v.e),u&&(v.a?.unfix(),(A??=new Set).delete(v))),v!==c){if(f!==void 0&&f.has(v)){if(I.length<M.length){var B=M[0],H;g=B.prev;var Y=I[0],ee=I[I.length-1];for(H=0;H<I.length;H+=1)Ce(I[H],B,l);for(H=0;H<M.length;H+=1)f.delete(M[H]);V(a,Y.prev,ee.next),V(a,g,Y),V(a,ee,B),c=B,g=ee,h-=1,I=[],M=[]}else f.delete(v),Ce(v,c,l),V(a,v.prev,v.next),V(a,v,g===null?a.first:g.next),V(a,g,v),g=v;continue}for(I=[],M=[];c!==null&&c.k!==p;)(c.e.f&ye)===0&&(f??=new Set).add(c),M.push(c),c=c.next;if(c===null)continue;v=c}I.push(v),g=v,c=v.next}if(c!==null||f!==void 0){for(var J=f===void 0?[]:lt(f);c!==null;)(c.e.f&ye)===0&&J.push(c),c=c.next;var te=J.length;if(te>0){var re=(n&ot)!==0&&C===0?l:null;if(u){for(h=0;h<te;h+=1)J[h].a?.measure();for(h=0;h<te;h+=1)J[h].a?.fix()}$t(a,J,re)}}u&&Ie(()=>{if(A!==void 0)for(v of A)v.a?.apply()}),e.first=a.first&&a.first.e,e.last=g&&g.e;for(var de of r.values())it(de.e);r.clear()}function ft(e,t,a,r){(r&ce)!==0&&Je(e.v,t),(r&ue)!==0?Je(e.i,a):e.i=a}function Ee(e,t,a,r,l,i,n,d,_,u,m){var C=(_&ce)!==0,w=(_&Ot)===0,S=C?w?R(l,!1,!1):Xe(l):l,c=(_&ue)===0?n:Xe(n),f={i:c,v:S,k:i,a:null,e:null,prev:a,next:r};try{if(e===null){var g=document.createDocumentFragment();g.append(e=rt())}return f.e=Se(()=>d(e,S,c,u),D),f.e.prev=a&&a.e,f.e.next=r&&r.e,a===null?m||(t.first=f):(a.next=f,a.e.next=f.e),r!==null&&(r.prev=f,r.e.prev=f.e),f}finally{}}function Ce(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,l=t?t.e.nodes_start:a,i=e.e.nodes_start;i!==null&&i!==r;){var n=Wt(i);l.before(i),i=n}}function V(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function ta(e,t){return e==null?null:String(e)}function W(e,t,a,r){var l=e.__style;if(D||l!==t){var i=ta(t);(!D||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=t}return r}const aa=Symbol("is custom element"),ra=Symbol("is html");function ie(e){if(D){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;Ze(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var l=e.checked;Ze(e,"checked",null),e.checked=l}}};e.__on_r=a,Gt(a),At()}}function Ze(e,t,a,r){var l=la(e);D&&(l[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||l[t]!==(l[t]=a)&&(t==="loading"&&(e[Kt]=a),e.removeAttribute(t))}function la(e){return e.__attributes??={[aa]:e.nodeName.includes("-"),[ra]:e.namespaceURI===Yt}}function na(e,t,a=t){var r=Qt(),l=new WeakSet;Me(e,"input",i=>{var n=i?e.defaultValue:e.value;if(n=xe(e)?Ae(n):n,a(n),$!==null&&l.add($),r&&n!==(n=t())){var d=e.selectionStart,_=e.selectionEnd;e.value=n??"",_!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(_,e.value.length))}}),(D&&e.defaultValue!==e.value||st(t)==null&&e.value)&&(a(xe(e)?Ae(e.value):e.value),$!==null&&l.add($)),Ne(()=>{var i=t();e===document.activeElement&&l.has($)||xe(e)&&i===Ae(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}const we=new Set;function $e(e,t,a,r,l=r){var i=a.getAttribute("type")==="checkbox",n=e;let d=!1;if(t!==null)for(var _ of t)n=n[_]??=[];n.push(a),Me(a,"change",()=>{var u=a.__value;i&&(u=et(n,u,a.checked)),l(u)},()=>l(i?[]:null)),Ne(()=>{var u=r();if(D&&a.defaultChecked!==a.checked){d=!0;return}i?(u=u||[],a.checked=u.includes(a.__value)):a.checked=Jt(a.__value,u)}),Xt(()=>{var u=n.indexOf(a);u!==-1&&n.splice(u,1)}),we.has(n)||(we.add(n),Ie(()=>{n.sort((u,m)=>u.compareDocumentPosition(m)===4?-1:1),we.delete(n)})),Ie(()=>{if(d){var u;if(i)u=et(n,u,a.checked);else{var m=n.find(C=>C.checked);u=m?.__value}l(u)}})}function ia(e,t,a=t){Me(e,"change",r=>{var l=r?e.defaultChecked:e.checked;a(l)}),(D&&e.defaultChecked!==e.checked||st(t)==null)&&a(e.checked),Ne(()=>{var r=t();e.checked=!!r})}function et(e,t,a){for(var r=new Set,l=0;l<e.length;l+=1)e[l].checked&&r.add(e[l].__value);return a||r.delete(t),Array.from(r)}function xe(e){var t=e.type;return t==="number"||t==="range"}function Ae(e){return e===""?null:+e}var oa=U("<button></button>");function sa(e,t){fe(t,!1);let a=L(t,"color",8,"#fff"),r=L(t,"border",8,!1),l=L(t,"onClick",8),i=L(t,"onLongpress",8),n=R();function d(m){b(n,setTimeout(()=>i()&&i()(),500))}function _(m){clearTimeout(s(n)),l()&&l()()}se();var u=oa();oe(()=>W(u,`background:${a()??""}; border:${r()?"3px solid #000":"none"}; width:40px; height:40px; margin:2px; border-radius:8px;`)),N("pointerdown",u,d),N("pointerup",u,_),N("pointerleave",u,()=>clearTimeout(s(n))),O(e,u),ve()}var ua=U('<input class="dialog-input svelte-19e2bah" type="number" placeholder="Seconds to go" min="1"/> <label class="dialog-checkbox svelte-19e2bah"><input type="checkbox"/> With alarm on timeout</label>',1),ca=U('<div class="dialog-backdrop svelte-19e2bah"><div class="dialog svelte-19e2bah"><h2 style="margin-bottom:1.2em; font-size:1.3em; font-weight:600; letter-spacing:0.01em;">Choose timer</h2> <div class="dialog-controls svelte-19e2bah"><label class="dialog-radio svelte-19e2bah"><input type="radio"/> With timeout</label> <label class="dialog-radio svelte-19e2bah"><input type="radio"/> Without timeout</label> <!></div> <div class="dialog-actions svelte-19e2bah"><button>Cancel</button> <button>Ok</button></div></div></div>');function fa(e,t){fe(t,!1);const a=[];let r=L(t,"onClose",8),l=L(t,"onStart",8),i=R(0),n=R(""),d=R(!0);function _(){if(s(i)===0){const p=parseInt(s(n));if(isNaN(p)||p<=0)return;l()&&l()({type:"down",seconds:p,hasAlarm:s(d)})}else l()&&l()({type:"up",seconds:0,hasAlarm:s(d)})}se();var u=ca(),m=x(u),C=y(x(m),2),w=x(C),S=x(w);ie(S),S.value=S.__value=0,Te(),T(w);var c=y(w,2),f=x(c);ie(f),f.value=f.__value=1,Te(),T(c);var g=y(c,2);{var A=p=>{var v=ua(),h=Pe(v);ie(h);var P=y(h,2),q=x(P);ie(q),Te(),T(P),na(h,()=>s(n),z=>b(n,z)),ia(q,()=>s(d),z=>b(d,z)),O(p,v)};Z(g,p=>{s(i)==0&&p(A)})}T(C);var I=y(C,2),M=x(I),j=y(M,2);T(I),T(m),T(u),$e(a,[],S,()=>s(i),p=>b(i,p)),$e(a,[],f,()=>s(i),p=>b(i,p)),N("click",M,()=>r()()),N("click",j,_),O(e,u),ve()}var va=U("<button></button>"),da=U('<div class="dialog-backdrop svelte-i1awfa"><div class="dialog svelte-i1awfa"><h2>Pick a color</h2> <div class="color-grid svelte-i1awfa"></div> <div style="margin-top:1em;"><button>Cancel</button></div></div></div>');function ha(e,t){fe(t,!1);let a=L(t,"colors",24,()=>[]),r=L(t,"current",8,0),l=L(t,"onPick",8),i=L(t,"onClose",8);se();var n=da(),d=x(n),_=y(x(d),2);ct(_,5,a,ut,(C,w,S)=>{var c=va();oe(()=>W(c,`background:${s(w)??""}; width:40px; height:40px; border-radius:8px; border:${S===r()?"3px solid #000":"none"}; margin:2px;`)),N("click",c,()=>l()(S)),O(C,c)}),T(_);var u=y(_,2),m=x(u);T(u),T(d),T(n),N("click",m,()=>i()()),O(e,n),ve()}var _a=U('<div class="dialog-backdrop svelte-1ue2njz"><div class="dialog svelte-1ue2njz"><h2>Help</h2> <ul style="padding-left:1.2em;"><li>Press on the main screen to move to the next player.</li> <li>Add/remove players by using the + and - buttons on the right.</li> <li>Press on the player buttons to directly select a player.</li> <li>Long press on the player buttons to switch colors.</li> <li>Use "Set Timer", "Pause Timer", "Resume Timer", "Cancel Timer" to control the timer.</li> <li>"Reset" resets everything to the initial state.</li></ul> <div style="margin-top:1em;"><button>Got it!</button></div></div></div>');function ma(e,t){let a=L(t,"onClose",8);var r=_a(),l=x(r),i=y(x(l),2),n=y(x(i),2);W(n,"margin-top: 5px;");var d=y(n,2);W(d,"margin-top: 5px;");var _=y(d,2);W(_,"margin-top: 5px;");var u=y(_,2);W(u,"margin-top: 5px;");var m=y(u,2);W(m,"margin-top: 5px;"),T(i);var C=y(i,2),w=x(C);T(C),T(l),T(r),N("click",w,function(...S){a()?.apply(this,S)}),O(e,r)}var ba=U('<div class="dialog-backdrop svelte-1ue2njz"><div class="dialog svelte-1ue2njz"><h2>Please Confirm</h2> <p>Defaults will be restored. Player count will be reset to 2.</p> <div style="margin-top:1em;"><button>Cancel</button> <button>Ok</button></div></div></div>');function ga(e,t){let a=L(t,"onClose",8),r=L(t,"onReset",8);var l=ba(),i=x(l),n=y(x(i),4),d=x(n),_=y(d,2);T(n),T(i),T(l),N("click",d,function(...u){a()?.apply(this,u)}),N("click",_,function(...u){r()?.apply(this,u)}),O(e,l)}class tt{intervalId=null;seconds=0;type="down";paused=!1;hasAlarm=!1;onTick=()=>{};onTimeout=()=>{};constructor(t,a,r,l,i){this.type=t,this.seconds=a,this.hasAlarm=r,this.onTick=l,this.onTimeout=i}start(){this.paused=!1,this.clear();let t=this.type==="down"?this.seconds:0;this.onTick(t),this.intervalId=setInterval(()=>{this.paused||(this.type==="down"?(t--,t<=0?(this.onTick(0),this.clear(),this.onTimeout()):this.onTick(t)):(t++,this.onTick(t)))},1e3)}reset(){this.clear();let t=this.type==="down"?this.seconds:0;this.onTick(t)}stop(){this.clear()}togglePause(){this.paused=!this.paused}clear(){this.intervalId!==null&&(clearInterval(this.intervalId),this.intervalId=null)}}var pa=U('<button class="svelte-7556jj">Pause/Resume Timer</button> <button class="svelte-7556jj">Cancel Timer</button>',1),ka=U('<button class="svelte-7556jj">Set Timer</button>'),ya=U('<audio src="/yourTurnWebsite/ringtone.mp3" preload="auto" style="display:none"></audio> <main class="svelte-7556jj"><header class="svelte-7556jj"><!> <button class="svelte-7556jj">Reset</button> <button class="svelte-7556jj">Help</button></header> <section style="display: flex; height: 80vh;"><button type="button" style="flex:1; display:flex; align-items:center; justify-content:center; background:transparent; border:none; padding:0; cursor:pointer;" aria-label="Next player"><span class="timer-display svelte-7556jj"><!></span></button> <aside style="width: 180px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:0.5rem;" class="svelte-7556jj"><button class="svelte-7556jj">+</button> <!> <button class="svelte-7556jj">-</button></aside></section> <!> <!> <!> <!></main>',1);function Sa(e,t){fe(t,!1);const a=["#3f51b5","#f44336","#4caf50","#ff9800","#00bcd4","#9e9e9e","#ffeb3b","#9c27b0","#795548","#fff"];let r=R([0,1]),l=R(0),i="down",n=0,d=!0,_=R(0),u=R(!1),m=R(!1),C=R(!1),w=R(!1),S=R(0),c=new tt(i,n,d,Re,je),f=R(),g=R(!1),A=!1,I=R(!1),M=null,j=null,p=R(!1);function v(){return a[s(r)[s(l)]]}function h(){const o=v();if(!o)return"#000";const k=o.charAt(0)==="#"?o.substring(1):o,E=parseInt(k.length===3?k.split("").map(Ke=>Ke+Ke).join(""):k,16),F=E>>16&255,G=E>>8&255,X=E&255;return .2126*F/255+.7152*G/255+.0722*X/255>.5?"#000":"#fff"}function P(){s(r).length<a.length&&b(r,[...s(r).slice(0,s(l)+1),z(),...s(r).slice(s(l)+1)])}function q(){s(r).length>2&&(b(r,s(r).filter((o,k)=>k!==s(l))),b(l,Math.min(s(l),s(r).length-1)))}function z(){let o=0;for(;s(r).includes(o);)o++;return o}function B(o){b(l,o%s(r).length),Y()}function H(){B(s(l)+1),Y()}function Y(){s(g)&&(c.reset(),b(_,i==="down"?n:0),c.start()),De(),he()}function ee(o,k){Q(r,s(r)[o]=k)}function J(){b(r,[0,1]),b(l,0),Le()}function te(o){if(o===0)return"0";const k=Math.floor(o/3600),E=Math.floor(o%3600/60),F=o%60;let G=[k,E,F],X=[];for(let K=G.length-1;K>=0;K--)K-1>=0&&G[K-1]!==0?X.unshift(G[K].toString().padStart(2,"0")):G[K]!==0&&X.unshift(G[K].toString());return X.join(":")}async function re(){try{"wakeLock"in navigator&&await navigator.wakeLock.request("screen")}catch(o){console.error("WakeLock error:",o)}}function de(o,k,E){i=o,n=k,d=E,b(_,o==="down"?k:0),b(u,!1),c=new tt(i,n,d,Re,je),c.reset(),c.start(),b(g,!0),re()}function Re(o){b(_,o)}function je(){d&&(A?vt():dt())}function vt(){b(I,!0),b(p,!1),M=window.setInterval(()=>{b(p,!s(p))},500),j=window.setTimeout(()=>{he()},1e4)}function he(){b(I,!1),M&&(clearInterval(M),M=null),j&&(clearTimeout(j),j=null)}function dt(){s(f)&&(Q(f,s(f).loop=!0),Q(f,s(f).currentTime=0),s(f).play()),s(f)&&(Q(f,s(f).loop=!0),Q(f,s(f).currentTime=0),s(f).play())}function De(){s(f)&&(s(f).pause(),Q(f,s(f).currentTime=0),Q(f,s(f).loop=!1))}function Le(){n=0,b(_,0),c.reset(),c.stop(),b(g,!1),De(),he()}function ht(){c.togglePause()}St(()=>{re(),A=/Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent)}),se();var He=ya(),Oe=Pe(He);Zt(Oe,o=>b(f,o),()=>s(f));var _e=y(Oe,2),le=x(_e),We=x(le);{var _t=o=>{var k=pa(),E=Pe(k),F=y(E,2);N("click",E,ht),N("click",F,Le),O(o,k)},mt=o=>{var k=ka();N("click",k,()=>b(u,!0)),O(o,k)};Z(We,o=>{s(g)?o(_t):o(mt,!1)})}var Fe=y(We,2),bt=y(Fe,2);T(le);var me=y(le,2),ne=x(me),be=x(ne),gt=x(be);{var pt=o=>{var k=Qe();oe(E=>It(k,E),[()=>te(s(_))]),O(o,k)},kt=o=>{var k=Qe();k.nodeValue=" ",O(o,k)};Z(gt,o=>{s(g)?o(pt):o(kt,!1)})}T(be),T(ne);var qe=y(ne,2),ge=x(qe),ze=y(ge,2);ct(ze,1,()=>s(r),ut,(o,k,E)=>{{let F=at(()=>E===s(l));sa(o,{get color(){return a[s(k)]},get border(){return s(F)},onClick:()=>B(E),onLongpress:()=>{b(S,E),b(m,!0)}})}});var Be=y(ze,2);T(qe),T(me);var Ve=y(me,2);{var yt=o=>{fa(o,{onClose:()=>b(u,!1),onStart:({type:k,seconds:E,hasAlarm:F})=>de(k,E,F)})};Z(Ve,o=>{s(u)&&o(yt)})}var Ue=y(Ve,2);{var Tt=o=>{ha(o,{get colors(){return a},get current(){return s(r)[s(S)]},onPick:k=>{ee(s(S),k),b(m,!1)},onClose:()=>b(m,!1)})};Z(Ue,o=>{s(m)&&o(Tt)})}var Ge=y(Ue,2);{var Ct=o=>{ma(o,{onClose:()=>b(C,!1)})};Z(Ge,o=>{s(C)&&o(Ct)})}var wt=y(Ge,2);{var xt=o=>{ga(o,{onClose:()=>b(w,!1),onReset:()=>{J(),b(w,!1)}})};Z(wt,o=>{s(w)&&o(xt)})}T(_e),oe((o,k,E,F,G,X)=>{W(_e,`background:${o??""}; min-height:100vh; transition:background 0.15s;`),W(le,`background:${k??""}; color:${E??""}; padding: 1rem; display: flex; align-items: center; gap: 1rem;`),W(be,`color:${F??""};`),W(ge,`color:${G??""};`),W(Be,`color:${X??""};`)},[()=>s(I)?s(p)?"#fff":"#000":v(),v,h,h,h,h]),N("click",Fe,()=>b(w,!0)),N("click",bt,()=>b(C,!0)),N("click",ne,H),N("click",ge,P),N("click",Be,q),O(e,He),ve()}export{Sa as component};
