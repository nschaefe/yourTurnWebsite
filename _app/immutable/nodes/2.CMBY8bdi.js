import"../chunks/DsnmJJEf.js";import{i as oe}from"../chunks/DhJbufK5.js";import{a as gt,l as Pe,e as R,o as pt,s as kt}from"../chunks/BiApfhNE.js";import{v as yt,w as D,x as wt,h as s,R as Qe,y as Tt,H as Ct,z as We,A as ge,B as pe,K as ae,ab as xt,af as At,D as Ae,G as St,F as te,aB as Fe,C as Ze,ax as M,aC as Ue,aj as $e,a8 as It,aD as se,I as et,J as Et,aE as ue,aF as Pt,aG as ke,aH as tt,ad as Rt,aI as Nt,ai as Mt,aJ as Dt,X as Lt,aa as Ht,aK as at,N as Se,aL as Ot,aM as jt,aN as qt,aO as zt,M as Re,aP as Bt,a6 as Vt,aQ as Wt,e as rt,p as ce,l as U,t as ie,a as j,m as ve,V as g,n as A,q as y,aR as ye,o as w,f as Ie,aS as Z,aA as Ge}from"../chunks/BP_LslGO.js";import{p as H,i as $,b as Ft}from"../chunks/BJ6pa5lZ.js";function lt(e,t){return t}function Ut(e,t,a){for(var r=e.items,l=[],i=t.length,n=0;n<i;n++)Nt(t[n].e,l,!0);var d=i>0&&l.length===0&&a!==null;if(d){var h=a.parentNode;Mt(h),h.append(a),r.clear(),F(e,t[0].prev,t[i-1].next)}Dt(l,()=>{for(var u=0;u<i;u++){var m=t[u];d||(r.delete(m.k),F(e,m.prev,m.next)),tt(m.e,!d)}})}function nt(e,t,a,r,l,i=null){var n=e,d={flags:t,items:new Map,first:null},h=(t&at)!==0;if(h){var u=e;n=D?ge(Ht(u)):u.appendChild(Ze())}D&&wt();var m=null,T=!1,C=new Map,I=Qe(()=>{var x=a();return It(x)?x:x==null?[]:$e(x)}),c,v;function _(){Gt(v,c,d,C,n,l,t,r,a),i!==null&&(c.length===0?m?et(m):m=Ae(()=>i(n)):m!==null&&Et(m,()=>{m=null}))}yt(()=>{v??=Lt,c=s(I);var x=c.length;if(T&&x===0)return;T=x===0;let S=!1;if(D){var N=Tt(n)===Ct;N!==(x===0)&&(n=We(),ge(n),pe(!1),S=!0)}if(D){for(var L=null,k,f=0;f<x;f++){if(ae.nodeType===xt&&ae.data===At){n=ae,S=!0,pe(!1);break}var b=c[f],E=r(b,f);k=Ee(ae,d,L,null,b,E,f,l,t,a),d.items.set(E,k),L=k}x>0&&ge(We())}if(D)x===0&&i&&(m=Ae(()=>i(n)));else if(St()){var B=new Set,V=te;for(f=0;f<x;f+=1){b=c[f],E=r(b,f);var W=d.items.get(E)??C.get(E);W?(t&(ue|se))!==0&&it(W,b,f,t):(k=Ee(null,d,null,null,b,E,f,l,t,a,!0),C.set(E,k)),B.add(E)}for(const[O,Y]of d.items)B.has(O)||V.skipped_effects.add(Y.e);V.add_callback(_)}else _();S&&pe(!0),s(I)}),D&&(n=ae)}function Gt(e,t,a,r,l,i,n,d,h){var u=(n&Ot)!==0,m=(n&(ue|se))!==0,T=t.length,C=a.items,I=a.first,c=I,v,_=null,x,S=[],N=[],L,k,f,b;if(u)for(b=0;b<T;b+=1)L=t[b],k=d(L,b),f=C.get(k),f!==void 0&&(f.a?.measure(),(x??=new Set).add(f));for(b=0;b<T;b+=1){if(L=t[b],k=d(L,b),f=C.get(k),f===void 0){var E=r.get(k);if(E!==void 0){r.delete(k),C.set(k,E);var B=_?_.next:c;F(a,_,E),F(a,E,B),we(E,B,l),_=E}else{var V=c?c.e.nodes_start:l;_=Ee(V,a,_,_===null?a.first:_.next,L,k,b,i,n,h)}C.set(k,_),S=[],N=[],c=_.next;continue}if(m&&it(f,L,b,n),(f.e.f&ke)!==0&&(et(f.e),u&&(f.a?.unfix(),(x??=new Set).delete(f))),f!==c){if(v!==void 0&&v.has(f)){if(S.length<N.length){var W=N[0],O;_=W.prev;var Y=S[0],ee=S[S.length-1];for(O=0;O<S.length;O+=1)we(S[O],W,l);for(O=0;O<N.length;O+=1)v.delete(N[O]);F(a,Y.prev,ee.next),F(a,_,Y),F(a,ee,W),c=W,_=ee,b-=1,S=[],N=[]}else v.delete(f),we(f,c,l),F(a,f.prev,f.next),F(a,f,_===null?a.first:_.next),F(a,_,f),_=f;continue}for(S=[],N=[];c!==null&&c.k!==k;)(c.e.f&ke)===0&&(v??=new Set).add(c),N.push(c),c=c.next;if(c===null)continue;f=c}S.push(f),_=f,c=f.next}if(c!==null||v!==void 0){for(var J=v===void 0?[]:$e(v);c!==null;)(c.e.f&ke)===0&&J.push(c),c=c.next;var X=J.length;if(X>0){var fe=(n&at)!==0&&T===0?l:null;if(u){for(b=0;b<X;b+=1)J[b].a?.measure();for(b=0;b<X;b+=1)J[b].a?.fix()}Ut(a,J,fe)}}u&&Se(()=>{if(x!==void 0)for(f of x)f.a?.apply()}),e.first=a.first&&a.first.e,e.last=_&&_.e;for(var de of r.values())tt(de.e);r.clear()}function it(e,t,a,r){(r&ue)!==0&&Fe(e.v,t),(r&se)!==0?Fe(e.i,a):e.i=a}function Ee(e,t,a,r,l,i,n,d,h,u,m){var T=(h&ue)!==0,C=(h&Pt)===0,I=T?C?M(l,!1,!1):Ue(l):l,c=(h&se)===0?n:Ue(n),v={i:c,v:I,k:i,a:null,e:null,prev:a,next:r};try{if(e===null){var _=document.createDocumentFragment();_.append(e=Ze())}return v.e=Ae(()=>d(e,I,c,u),D),v.e.prev=a&&a.e,v.e.next=r&&r.e,a===null?m||(t.first=v):(a.next=v,a.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function we(e,t,a){for(var r=e.next?e.next.e.nodes_start:a,l=t?t.e.nodes_start:a,i=e.e.nodes_start;i!==null&&i!==r;){var n=Rt(i);l.before(i),i=n}}function F(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function Kt(e,t){return e==null?null:String(e)}function q(e,t,a,r){var l=e.__style;if(D||l!==t){var i=Kt(t);(!D||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=t}return r}const Yt=Symbol("is custom element"),Jt=Symbol("is html");function ne(e){if(D){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;Ke(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var l=e.checked;Ke(e,"checked",null),e.checked=l}}};e.__on_r=a,jt(a),gt()}}function Ke(e,t,a,r){var l=Xt(e);D&&(l[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||l[t]!==(l[t]=a)&&(t==="loading"&&(e[qt]=a),e.removeAttribute(t))}function Xt(e){return e.__attributes??={[Yt]:e.nodeName.includes("-"),[Jt]:e.namespaceURI===zt}}function Qt(e,t,a=t){var r=Wt(),l=new WeakSet;Pe(e,"input",i=>{var n=i?e.defaultValue:e.value;if(n=Ce(e)?xe(n):n,a(n),te!==null&&l.add(te),r&&n!==(n=t())){var d=e.selectionStart,h=e.selectionEnd;e.value=n??"",h!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(h,e.value.length))}}),(D&&e.defaultValue!==e.value||rt(t)==null&&e.value)&&(a(Ce(e)?xe(e.value):e.value),te!==null&&l.add(te)),Re(()=>{var i=t();e===document.activeElement&&l.has(te)||Ce(e)&&i===xe(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}const Te=new Set;function Ye(e,t,a,r,l=r){var i=a.getAttribute("type")==="checkbox",n=e;let d=!1;if(t!==null)for(var h of t)n=n[h]??=[];n.push(a),Pe(a,"change",()=>{var u=a.__value;i&&(u=Je(n,u,a.checked)),l(u)},()=>l(i?[]:null)),Re(()=>{var u=r();if(D&&a.defaultChecked!==a.checked){d=!0;return}i?(u=u||[],a.checked=u.includes(a.__value)):a.checked=Bt(a.__value,u)}),Vt(()=>{var u=n.indexOf(a);u!==-1&&n.splice(u,1)}),Te.has(n)||(Te.add(n),Se(()=>{n.sort((u,m)=>u.compareDocumentPosition(m)===4?-1:1),Te.delete(n)})),Se(()=>{if(d){var u;if(i)u=Je(n,u,a.checked);else{var m=n.find(T=>T.checked);u=m?.__value}l(u)}})}function Zt(e,t,a=t){Pe(e,"change",r=>{var l=r?e.defaultChecked:e.checked;a(l)}),(D&&e.defaultChecked!==e.checked||rt(t)==null)&&a(e.checked),Re(()=>{var r=t();e.checked=!!r})}function Je(e,t,a){for(var r=new Set,l=0;l<e.length;l+=1)e[l].checked&&r.add(e[l].__value);return a||r.delete(t),Array.from(r)}function Ce(e){var t=e.type;return t==="number"||t==="range"}function xe(e){return e===""?null:+e}var $t=U("<button></button>");function ea(e,t){ce(t,!1);let a=H(t,"color",8,"#fff"),r=H(t,"border",8,!1),l=H(t,"onClick",8),i=H(t,"onLongpress",8),n=M();function d(m){g(n,setTimeout(()=>i()&&i()(),500))}function h(m){clearTimeout(s(n)),l()&&l()()}oe();var u=$t();ie(()=>q(u,`background:${a()??""}; border:${r()?"3px solid #000":"none"}; width:40px; height:40px; margin:2px; border-radius:8px;`)),R("pointerdown",u,d),R("pointerup",u,h),R("pointerleave",u,()=>clearTimeout(s(n))),j(e,u),ve()}var ta=U('<input class="dialog-input svelte-19e2bah" type="number" placeholder="Seconds to go" min="1"/> <label class="dialog-checkbox svelte-19e2bah"><input type="checkbox"/> With alarm on timeout</label>',1),aa=U('<div class="dialog-backdrop svelte-19e2bah"><div class="dialog svelte-19e2bah"><h2 style="margin-bottom:1.2em; font-size:1.3em; font-weight:600; letter-spacing:0.01em;">Choose timer</h2> <div class="dialog-controls svelte-19e2bah"><label class="dialog-radio svelte-19e2bah"><input type="radio"/> With timeout</label> <label class="dialog-radio svelte-19e2bah"><input type="radio"/> Without timeout</label> <!></div> <div class="dialog-actions svelte-19e2bah"><button>Cancel</button> <button>Ok</button></div></div></div>');function ra(e,t){ce(t,!1);const a=[];let r=H(t,"onClose",8),l=H(t,"onStart",8),i=M(0),n=M(""),d=M(!0);function h(){if(s(i)===0){const k=parseInt(s(n));if(isNaN(k)||k<=0)return;l()&&l()({type:"down",seconds:k,hasAlarm:s(d)})}else l()&&l()({type:"up",seconds:0,hasAlarm:s(d)})}oe();var u=aa(),m=A(u),T=y(A(m),2),C=A(T),I=A(C);ne(I),I.value=I.__value=0,ye(),w(C);var c=y(C,2),v=A(c);ne(v),v.value=v.__value=1,ye(),w(c);var _=y(c,2);{var x=k=>{var f=ta(),b=Ie(f);ne(b);var E=y(b,2),B=A(E);ne(B),ye(),w(E),Qt(b,()=>s(n),V=>g(n,V)),Zt(B,()=>s(d),V=>g(d,V)),j(k,f)};$(_,k=>{s(i)==0&&k(x)})}w(T);var S=y(T,2),N=A(S),L=y(N,2);w(S),w(m),w(u),Ye(a,[],I,()=>s(i),k=>g(i,k)),Ye(a,[],v,()=>s(i),k=>g(i,k)),R("click",N,()=>r()()),R("click",L,h),j(e,u),ve()}var la=U("<button></button>"),na=U('<div class="dialog-backdrop svelte-i1awfa"><div class="dialog svelte-i1awfa"><h2>Pick a color</h2> <div class="color-grid svelte-i1awfa"></div> <div style="margin-top:1em;"><button>Cancel</button></div></div></div>');function ia(e,t){ce(t,!1);let a=H(t,"colors",24,()=>[]),r=H(t,"current",8,0),l=H(t,"onPick",8),i=H(t,"onClose",8);oe();var n=na(),d=A(n),h=y(A(d),2);nt(h,5,a,lt,(T,C,I)=>{var c=la();ie(()=>q(c,`background:${s(C)??""}; width:40px; height:40px; border-radius:8px; border:${I===r()?"3px solid #000":"none"}; margin:2px;`)),R("click",c,()=>l()(I)),j(T,c)}),w(h);var u=y(h,2),m=A(u);w(u),w(d),w(n),R("click",m,()=>i()()),j(e,n),ve()}var oa=U('<div class="dialog-backdrop svelte-1ue2njz"><div class="dialog svelte-1ue2njz"><h2>Help</h2> <ul style="padding-left:1.2em;"><li>Press on the main screen to move to the next player.</li> <li>Add/remove players by using the + and - buttons on the right.</li> <li>Press on the player buttons to directly select a player.</li> <li>Long press on the player buttons to switch colors.</li> <li>Use "Set Timer", "Pause Timer", "Resume Timer", "Cancel Timer" to control the timer.</li> <li>"Reset" resets everything to the initial state.</li></ul> <div style="margin-top:1em;"><button>Got it!</button></div></div></div>');function sa(e,t){let a=H(t,"onClose",8);var r=oa(),l=A(r),i=y(A(l),2),n=y(A(i),2);q(n,"margin-top: 5px;");var d=y(n,2);q(d,"margin-top: 5px;");var h=y(d,2);q(h,"margin-top: 5px;");var u=y(h,2);q(u,"margin-top: 5px;");var m=y(u,2);q(m,"margin-top: 5px;"),w(i);var T=y(i,2),C=A(T);w(T),w(l),w(r),R("click",C,function(...I){a()?.apply(this,I)}),j(e,r)}var ua=U('<div class="dialog-backdrop svelte-1ue2njz"><div class="dialog svelte-1ue2njz"><h2>Please Confirm</h2> <p>Defaults will be restored. Player count will be reset to 2.</p> <div style="margin-top:1em;"><button>Cancel</button> <button>Ok</button></div></div></div>');function ca(e,t){let a=H(t,"onClose",8),r=H(t,"onReset",8);var l=ua(),i=A(l),n=y(A(i),4),d=A(n),h=y(d,2);w(n),w(i),w(l),R("click",d,function(...u){a()?.apply(this,u)}),R("click",h,function(...u){r()?.apply(this,u)}),j(e,l)}class Xe{intervalId=null;seconds=0;type="down";paused=!1;hasAlarm=!1;onTick=()=>{};onTimeout=()=>{};constructor(t,a,r,l,i){this.type=t,this.seconds=a,this.hasAlarm=r,this.onTick=l,this.onTimeout=i}start(){this.paused=!1,this.clear();let t=this.type==="down"?this.seconds:0;this.onTick(t),this.intervalId=setInterval(()=>{this.paused||(this.type==="down"?(t--,t<=0?(this.onTick(0),this.clear(),this.onTimeout()):this.onTick(t)):(t++,this.onTick(t)))},1e3)}reset(){this.clear();let t=this.type==="down"?this.seconds:0;this.onTick(t)}stop(){this.clear()}togglePause(){this.paused=!this.paused}clear(){this.intervalId!==null&&(clearInterval(this.intervalId),this.intervalId=null)}}var va=U('<button class="svelte-2ea8wj">Pause/Resume Timer</button> <button class="svelte-2ea8wj">Cancel Timer</button>',1),fa=U('<button class="svelte-2ea8wj">Set Timer</button>'),da=U('<audio src="/ringtone.mp3" preload="auto" style="display:none"></audio> <main class="svelte-2ea8wj"><header class="svelte-2ea8wj"><!> <button class="svelte-2ea8wj">Reset</button> <button class="svelte-2ea8wj">Help</button></header> <section style="display: flex; height: 80vh;"><button type="button" style="flex:1; display:flex; align-items:center; justify-content:center; background:transparent; border:none; padding:0; cursor:pointer;" aria-label="Next player"><span class="timer-display svelte-2ea8wj"><!></span></button> <aside style="width: 180px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:0.5rem;" class="svelte-2ea8wj"><button class="svelte-2ea8wj">+</button> <!> <button class="svelte-2ea8wj">-</button></aside></section> <!> <!> <!> <!></main>',1);function pa(e,t){ce(t,!1);const a=["#3f51b5","#f44336","#4caf50","#ff9800","#00bcd4","#9e9e9e","#ffeb3b","#9c27b0","#795548","#fff"];let r=M([0,1]),l=M(0),i="down",n=0,d=!0,h=M(0),u=M(!1),m=M(!1),T=M(!1),C=M(!1),I=M(0),c=new Xe(i,n,d,Y,ee),v=M(),_=M(!1);function x(){return a[s(r)[s(l)]]}function S(){const o=x();if(!o)return"#000";const p=o.charAt(0)==="#"?o.substring(1):o,P=parseInt(p.length===3?p.split("").map(Ve=>Ve+Ve).join(""):p,16),z=P>>16&255,G=P>>8&255,Q=P&255;return .2126*z/255+.7152*G/255+.0722*Q/255>.5?"#000":"#fff"}function N(){s(r).length<a.length&&g(r,[...s(r).slice(0,s(l)+1),k(),...s(r).slice(s(l)+1)])}function L(){s(r).length>2&&(g(r,s(r).filter((o,p)=>p!==s(l))),g(l,Math.min(s(l),s(r).length-1)))}function k(){let o=0;for(;s(r).includes(o);)o++;return o}function f(o){g(l,o%s(r).length),s(_)&&(c.reset(),g(h,i==="down"?n:0),c.start())}function b(){f(s(l)+1),s(_)&&(c.reset(),g(h,i==="down"?n:0),c.start()),X()}function E(o,p){Z(r,s(r)[o]=p)}function B(){g(r,[0,1]),g(l,0),n=0,g(h,0),c.reset(),c.stop(),g(_,!1),X()}function V(o){if(o===0)return"0";const p=Math.floor(o/3600),P=Math.floor(o%3600/60),z=o%60;let G=[p,P,z],Q=[];for(let K=G.length-1;K>=0;K--)K-1>=0&&G[K-1]!==0?Q.unshift(G[K].toString().padStart(2,"0")):G[K]!==0&&Q.unshift(G[K].toString());return Q.join(":")}async function W(){try{"wakeLock"in navigator&&await navigator.wakeLock.request("screen")}catch(o){console.error("WakeLock error:",o)}}function O(o,p,P){i=o,n=p,d=P,g(h,o==="down"?p:0),g(u,!1),c=new Xe(i,n,d,Y,ee),c.reset(),c.start(),g(_,!0),W()}function Y(o){g(h,o)}function ee(){d&&J()}function J(){s(v)&&(Z(v,s(v).loop=!0),Z(v,s(v).currentTime=0),s(v).play()),s(v)&&(Z(v,s(v).loop=!0),Z(v,s(v).currentTime=0),s(v).play())}function X(){s(v)&&(s(v).pause(),Z(v,s(v).currentTime=0),Z(v,s(v).loop=!1))}function fe(){n=0,g(h,0),c.reset(),c.stop(),g(_,!1),X()}function de(){c.togglePause()}pt(()=>{W()}),oe();var Ne=da(),Me=Ie(Ne);Ft(Me,o=>g(v,o),()=>s(v));var he=y(Me,2),re=A(he),De=A(re);{var ot=o=>{var p=va(),P=Ie(p),z=y(P,2);R("click",P,de),R("click",z,fe),j(o,p)},st=o=>{var p=fa();R("click",p,()=>g(u,!0)),j(o,p)};$(De,o=>{s(_)?o(ot):o(st,!1)})}var Le=y(De,2),ut=y(Le,2);w(re);var _e=y(re,2),le=A(_e),me=A(le),ct=A(me);{var vt=o=>{var p=Ge();ie(P=>kt(p,P),[()=>V(s(h))]),j(o,p)},ft=o=>{var p=Ge();p.nodeValue=" ",j(o,p)};$(ct,o=>{s(_)?o(vt):o(ft,!1)})}w(me),w(le);var He=y(le,2),be=A(He),Oe=y(be,2);nt(Oe,1,()=>s(r),lt,(o,p,P)=>{{let z=Qe(()=>P===s(l));ea(o,{get color(){return a[s(p)]},get border(){return s(z)},onClick:()=>f(P),onLongpress:()=>{g(I,P),g(m,!0)}})}});var je=y(Oe,2);w(He),w(_e);var qe=y(_e,2);{var dt=o=>{ra(o,{onClose:()=>g(u,!1),onStart:({type:p,seconds:P,hasAlarm:z})=>O(p,P,z)})};$(qe,o=>{s(u)&&o(dt)})}var ze=y(qe,2);{var ht=o=>{ia(o,{get colors(){return a},get current(){return s(r)[s(I)]},onPick:p=>{E(s(I),p),g(m,!1)},onClose:()=>g(m,!1)})};$(ze,o=>{s(m)&&o(ht)})}var Be=y(ze,2);{var _t=o=>{sa(o,{onClose:()=>g(T,!1)})};$(Be,o=>{s(T)&&o(_t)})}var mt=y(Be,2);{var bt=o=>{ca(o,{onClose:()=>g(C,!1),onReset:()=>{B(),g(C,!1)}})};$(mt,o=>{s(C)&&o(bt)})}w(he),ie((o,p,P,z,G,Q)=>{q(he,`background:${o??""}; min-height:100vh;`),q(re,`background:${p??""}; color:${P??""}; padding: 1rem; display: flex; align-items: center; gap: 1rem;`),q(me,`color:${z??""};`),q(be,`color:${G??""};`),q(je,`color:${Q??""};`)},[x,x,S,S,S,S]),R("click",Le,()=>g(C,!0)),R("click",ut,()=>g(T,!0)),R("click",le,b),R("click",be,N),R("click",je,L),j(e,Ne),ve()}export{pa as component};
